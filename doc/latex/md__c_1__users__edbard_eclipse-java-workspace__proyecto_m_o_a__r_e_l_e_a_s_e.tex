\hypertarget{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md10}{}\doxysection{Prerequisites}\label{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md10}

\begin{DoxyItemize}
\item use Java 9+ for making release. Make sure the J\+A\+V\+A\+\_\+\+H\+O\+ME environment variable is set to the correct J\+DK directory and exported in your terminal
\item ensure that all {\ttfamily pom.\+xml} files list the same version, update them if necessary to {\ttfamily yyyy.\+mm.\+0-\/S\+N\+A\+P\+S\+H\+OT} (check correct patch level)
\item in the \mbox{\hyperlink{classmoa_1_1core_1_1_globals}{moa.\+core.\+Globals}} class, update the version\+String variable to match the upcoming version
\item in the {\ttfamily weka-\/package/\+Description.\+props} file, ensure that the following properties have been updated and aligned with the upcoming version\+:
\begin{DoxyItemize}
\item {\ttfamily Version} (yyyy.\+mm.\+0, check correct patch level)
\item {\ttfamily Date}
\item {\ttfamily Package\+U\+RL}
\end{DoxyItemize}
\item ensure that all code has been committed/pushed
\end{DoxyItemize}\hypertarget{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md11}{}\doxysection{Deploy to Maven Central}\label{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md11}

\begin{DoxyItemize}
\item Ensure your G\+PG signing key and Sonatype credentials are available in your Maven settings.\+xml file (found at either $\sim$/.m2/ or /usr/share/maven/conf/). You can check the settings have been applied correctly by running the command\+:
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{mvn help:effective-\/settings}
\end{DoxyCode}



\begin{DoxyItemize}
\item For more information, follow the instructions at the following pages\+:

\href{https://blog.sonatype.com/2010/01/how-to-generate-pgp-signatures-with-maven/}{\texttt{ https\+://blog.\+sonatype.\+com/2010/01/how-\/to-\/generate-\/pgp-\/signatures-\/with-\/maven/}} \href{https://blog.sonatype.com/2010/11/what-to-do-when-nexus-returns-401/}{\texttt{ https\+://blog.\+sonatype.\+com/2010/11/what-\/to-\/do-\/when-\/nexus-\/returns-\/401/}}
\item Publish your public G\+PG signing key to the keyserver at keyserver.\+ubuntu.\+com
\item Run the following maven command (from the top-\/level M\+OA directory), which will automatically use the current version present in the {\ttfamily pom.\+xml} files and then increment it after the release has succeeded.

\`{}\`{}\`{} mvn --batch-\/mode release\+:prepare release\+:perform \`{}\`{}\`{}
\item Log into \href{https://oss.sonatype.org}{\texttt{ https\+://oss.\+sonatype.\+org}}
\item Select {\bfseries{Staging Repositories}}, scroll right to the bottom of the list and look for a repository called something like {\itshape nzacwaikatocmsmoa-\/\+X\+YZ}. Select this repository via the check-\/box.
\item Subsequently {\bfseries{Close}} and then {\bfseries{Release}} the artifacts. NB\+: It may take a few minutes before the {\itshape Release} button becomes available, as the system is flagging all the artifacts from the staging repo. When releasing, leave the {\bfseries{Drop Repository}} check-\/box ticked.
\item Perform a {\ttfamily git push}
\item Check the following U\+RL after 15-\/20min (sync with Maven Central only happens every 15min or so) to see whether they artifacts are indeed available from Maven Central (the search index at \href{https://search.maven.org/}{\texttt{ https\+://search.\+maven.\+org/}} only gets updated every few hours)\+:

\href{http://central.maven.org/maven2/nz/ac/waikato/cms/moa/}{\texttt{ http\+://central.\+maven.\+org/maven2/nz/ac/waikato/cms/moa/}}
\end{DoxyItemize}\hypertarget{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md12}{}\doxysection{Generate release files}\label{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md12}
\hypertarget{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md13}{}\doxysubsection{M\+OA}\label{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md13}

\begin{DoxyItemize}
\item update the {\itshape parent version} in {\ttfamily release.\+xml} to the just released version, i.\+e., {\ttfamily yyyy.\+mm.\+0} (without the {\ttfamily -\/S\+N\+A\+P\+S\+H\+OT} suffix, check correct patch level)
\item execute the following commands (top-\/level directory)

\`{}\`{}\`{} mvn clean install -\/Dskip\+Tests=true latex\+:latex mvn -\/f release.\+xml prepare-\/package deb\+:package install \`{}\`{}\`{}
\end{DoxyItemize}\hypertarget{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md14}{}\doxysubsection{Weka Package}\label{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md14}

\begin{DoxyItemize}
\item go into the {\ttfamily weka-\/package} directory
\item update the {\itshape parent version} in {\ttfamily update\+\_\+libs.\+xml} to the just released version, i.\+e., {\ttfamily yyyy.\+mm.\+0} (without the {\ttfamily -\/S\+N\+A\+P\+S\+H\+OT} suffix, check correct patch level)
\item execute the following command to update libraries in the {\ttfamily lib} directory
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{mvn -\/f update\_libs.xml clean package}
\end{DoxyCode}



\begin{DoxyItemize}
\item execute the following command (replace {\ttfamily X.\+Y.\+Z} with actual version of M\+OA, eg {\ttfamily yyyy.\+mm.\+0}, check correct patch level)

\`{}\`{}\`{} ant -\/f build\+\_\+package.\+xml -\/Dpackage=massive\+Online\+Analysis-\/\+X.\+Y.\+Z clean make\+\_\+package \`{}\`{}\`{}
\end{DoxyItemize}\hypertarget{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md15}{}\doxysection{Publish release}\label{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md15}

\begin{DoxyItemize}
\item create new release tag on Github (tag version {\ttfamily yyyy.\+mm.\+0}, release title {\ttfamily M\+OA yy.\+mm.\+0}) and upload the generated M\+OA release zip file from the top-\/level {\ttfamily target} directory and the zip file from the {\ttfamily weka-\/package/dist} directory
\item email Mark Hall (mhall at waikato.\+ac.\+nz) the link to the Weka package zip file to upload to the central Weka package repository on Sourceforge.\+net
\end{DoxyItemize}\hypertarget{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md16}{}\doxysection{Finish up}\label{md__c_1__users__edbard_eclipse-java-workspace__proyecto_m_o_a__r_e_l_e_a_s_e_autotoc_md16}

\begin{DoxyItemize}
\item synchronize the {\itshape parent version} in {\ttfamily release.\+xml} and {\ttfamily update\+\_\+libs.\+xml} to match the new version in the top-\/level {\ttfamily pom.\+xml} file; this is required to make the snapshots work (\href{https://adams.cms.waikato.ac.nz/jenkins/job/MOA/}{\texttt{ jenkins}}, \href{https://adams.cms.waikato.ac.nz/snapshots/moa/}{\texttt{ download}});
\item ensure that the {\ttfamily Y} in {\ttfamily X.\+Y.\+Z} is two digits in all {\ttfamily pom.\+xml} files, {\ttfamily release.\+xml} and {\ttfamily update\+\_\+libs.\+xml}; the automatic increment will strip a leading zero.
\item commit/push all changes 
\end{DoxyItemize}